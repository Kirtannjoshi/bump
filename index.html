<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bump - Chat App</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#7C3AED">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <!-- Auth Container - Side by Side Layout -->
    <div id="auth-container" class="auth-container">
        <!-- Full Background -->
        <div class="auth-bg-unified">
            <div class="bg-gradient"></div>
            <div class="bg-noise"></div>
        </div>
        
        <!-- Two Column Content -->
        <div class="auth-content-wrapper">
            <!-- Left Side - Branding with Decorative Elements -->
            <div class="auth-branding-side">
                <!-- Decorative Floating Elements -->
                <div class="deco-elements">
                    <div class="deco-bubble deco-1">Hey! üëã</div>
                    <div class="deco-bubble deco-2">Let's chat! üí¨</div>
                    <div class="deco-bubble deco-3">üî•</div>
                    <div class="deco-emoji deco-4">‚ù§Ô∏è</div>
                    <div class="deco-emoji deco-5">‚ú®</div>
                    <div class="deco-emoji deco-6">üöÄ</div>
                    <div class="deco-emoji deco-7">üíú</div>
                    <div class="deco-sparkle sparkle-1"></div>
                    <div class="deco-sparkle sparkle-2"></div>
                    <div class="deco-sparkle sparkle-3"></div>
                </div>
                
                <!-- Center Logo -->
                <div class="auth-brand-center">
                    <h1 class="text-logo-main">Bump</h1>
                    <p class="brand-tagline">Connect instantly. Chat seamlessly.</p>
                </div>
            </div>
            
            <!-- Right Side - Auth Forms -->
            <div class="auth-form-side">
                <div class="auth-form-card">
                    <!-- Login Form -->
                    <form id="login-form" class="auth-form active">
                        <h2 class="auth-title">Welcome back!</h2>
                        <p class="auth-subtitle">We're so excited to see you again!</p>
                        
                        <div class="form-group">
                            <label class="form-label">EMAIL OR USERNAME</label>
                            <input type="text" id="login-username" class="form-input" required autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label class="form-label">PASSWORD</label>
                            <input type="password" id="login-password" class="form-input" required autocomplete="current-password">
                        </div>
                        <button type="submit" class="btn-primary-auth">Log In</button>
                        
                        <p class="auth-switch">Need an account? <a href="#" id="show-signup">Register</a></p>
                    </form>
                    
                    <!-- Signup Form -->
                    <form id="signup-form" class="auth-form">
                        <h2 class="auth-title">Create an account</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">FULL NAME</label>
                                <input type="text" id="signup-fullname" class="form-input" required autocomplete="name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">USERNAME</label>
                                <input type="text" id="signup-username" class="form-input" required autocomplete="username">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">EMAIL</label>
                            <input type="email" id="signup-email" class="form-input" required autocomplete="email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">PASSWORD</label>
                            <input type="password" id="signup-password" class="form-input" required autocomplete="new-password" minlength="6">
                        </div>
                        
                        <!-- Gender Selection -->
                        <div class="form-group">
                            <label class="form-label">GENDER</label>
                            <div class="gender-selection">
                                <button type="button" class="gender-btn active" data-gender="male">
                                    <i class="fas fa-mars"></i>
                                    <span>Male</span>
                                </button>
                                <button type="button" class="gender-btn" data-gender="female">
                                    <i class="fas fa-venus"></i>
                                    <span>Female</span>
                                </button>
                                <button type="button" class="gender-btn" data-gender="other">
                                    <i class="fas fa-genderless"></i>
                                    <span>Other</span>
                                </button>
                            </div>
                            <input type="hidden" id="selected-gender" value="male">
                        </div>
                        
                        <!-- Avatar Selection -->
                        <div class="form-group">
                            <label class="form-label">CHOOSE AVATAR</label>
                            <div class="avatar-types-row" id="avatar-types-row">
                                <!-- Avatars will be populated based on gender -->
                            </div>
                            <input type="hidden" id="selected-avatar-style" value="avataaars">
                        </div>
                        
                        <button type="submit" class="btn-primary-auth">Continue</button>
                        
                        <p class="terms-text">
                            By registering, you agree to Bump's Terms of Service and Privacy Policy.
                        </p>
                        
                        <p class="auth-switch"><a href="#" id="show-login">Already have an account?</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="app-container hidden">
        <!-- Mobile Top Header -->
        <header class="mobile-header">
            <div class="mobile-header-content">
                <span class="mobile-logo">Bump</span>
            </div>
        </header>
        
        <!-- Navigation Rail -->
        <nav class="nav-rail">
            <div class="nav-logo">
                <span class="app-text-logo">B</span>
            </div>
            <div class="nav-items">
                <button class="nav-item active" data-view="chats" title="Chats">
                    <i class="fas fa-comment-dots"></i>
                    <span class="nav-label">Chats</span>
                    <span class="nav-badge hidden" id="unread-badge">0</span>
                </button>
                <button class="nav-item" data-view="inbox" title="Inbox">
                    <i class="fas fa-inbox"></i>
                    <span class="nav-label">Inbox</span>
                    <span class="nav-badge hidden" id="inbox-badge">0</span>
                </button>
                <button class="nav-item" data-view="search" title="Search">
                    <i class="fas fa-search"></i>
                    <span class="nav-label">Search</span>
                </button>
                <button class="nav-item" data-view="profile" title="Profile">
                    <i class="fas fa-user"></i>
                    <span class="nav-label">Profile</span>
                </button>
                <button class="nav-item" data-view="settings" title="Settings">
                    <i class="fas fa-cog"></i>
                    <span class="nav-label">Settings</span>
                </button>
            </div>
            <div class="nav-bottom">
                <button class="nav-item" id="logout-btn" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="nav-label">Logout</span>
                </button>
            </div>
        </nav>

        <!-- Mobile Bottom Navigation -->
        <nav class="mobile-nav">
            <button class="mobile-nav-item active" data-view="chats">
                <i class="fas fa-comment-dots"></i>
                <span>Chats</span>
            </button>
            <button class="mobile-nav-item" data-view="inbox">
                <i class="fas fa-inbox"></i>
                <span>Inbox</span>
            </button>
            <button class="mobile-nav-item" data-view="search">
                <i class="fas fa-search"></i>
                <span>Search</span>
            </button>
            <button class="mobile-nav-item" data-view="profile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </button>
            <button class="mobile-nav-item" data-view="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </button>
        </nav>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Chats Sidebar -->
            <div id="chats-sidebar" class="sidebar-content active">
                <div class="sidebar-header">
                    <h2>Chats</h2>
                    <button class="btn-icon" id="new-chat-btn" title="New Chat">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="sidebar-search">
                    <i class="fas fa-search"></i>
                    <input type="text" id="chat-search" placeholder="Search chats...">
                </div>
                <div class="chat-list" id="chat-list">
                    <!-- Chat items will be dynamically added -->
                </div>
            </div>

            <!-- Inbox Sidebar - Gmail/Discord Style -->
            <div id="inbox-sidebar" class="sidebar-content">
                <div class="sidebar-header">
                    <h2>Inbox</h2>
                    <button class="btn-icon" id="compose-btn" title="Compose">
                        <i class="fas fa-pen"></i>
                    </button>
                </div>
                
                <!-- Inbox Tabs -->
                <div class="inbox-tabs">
                    <button class="inbox-tab active" data-tab="all">
                        <i class="fas fa-inbox"></i>
                        <span>All</span>
                    </button>
                    <button class="inbox-tab" data-tab="requests">
                        <i class="fas fa-user-plus"></i>
                        <span>Requests</span>
                        <span class="tab-badge" id="requests-badge">0</span>
                    </button>
                    <button class="inbox-tab" data-tab="friends">
                        <i class="fas fa-users"></i>
                        <span>Friends</span>
                    </button>
                </div>
                
                <!-- All Tab Content -->
                <div class="inbox-tab-content active" id="inbox-all">
                    <!-- Personalized Welcome Message -->
                    <div class="inbox-item bump-official unread" onclick="openInboxViewer('welcome')">
                        <div class="inbox-item-avatar">
                            <div class="bump-avatar-mini">
                                <span>B</span>
                            </div>
                            <i class="fas fa-check-circle verified-badge"></i>
                        </div>
                        <div class="inbox-item-content">
                            <div class="inbox-item-header">
                                <span class="inbox-item-sender">Bump Team</span>
                                <span class="inbox-item-time">Now</span>
                            </div>
                            <p class="inbox-item-subject" id="welcome-subject">Welcome to Bump! üéâ</p>
                            <p class="inbox-item-preview" id="welcome-preview">Your journey starts now. Here's everything you need to know...</p>
                        </div>
                        <i class="fas fa-chevron-right inbox-arrow"></i>
                    </div>
                    
                    <!-- Update Notification -->
                    <div class="inbox-item bump-official" onclick="openInboxViewer('update')">
                        <div class="inbox-item-avatar">
                            <div class="bump-avatar-mini">
                                <span>B</span>
                            </div>
                            <i class="fas fa-check-circle verified-badge"></i>
                        </div>
                        <div class="inbox-item-content">
                            <div class="inbox-item-header">
                                <span class="inbox-item-sender">Bump Updates</span>
                                <span class="inbox-item-time">Dec 22</span>
                            </div>
                            <p class="inbox-item-subject">New Features Just Dropped! ‚ú®</p>
                            <p class="inbox-item-preview">Check out what's new in Bump v1.0...</p>
                        </div>
                        <i class="fas fa-chevron-right inbox-arrow"></i>
                    </div>
                    
                    <!-- Tips & Tricks -->
                    <div class="inbox-item bump-official" onclick="openInboxViewer('tips')">
                        <div class="inbox-item-avatar">
                            <div class="bump-avatar-mini tips">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                        </div>
                        <div class="inbox-item-content">
                            <div class="inbox-item-header">
                                <span class="inbox-item-sender">Bump Tips</span>
                                <span class="inbox-item-time">Yesterday</span>
                            </div>
                            <p class="inbox-item-subject" id="tips-subject">Unlock the full Bump experience üîì</p>
                            <p class="inbox-item-preview">Quick tips to get the most out of Bump...</p>
                        </div>
                        <i class="fas fa-chevron-right inbox-arrow"></i>
                    </div>
                </div>
                
                <!-- Requests Tab Content -->
                <div class="inbox-tab-content" id="inbox-requests">
                    <div class="friend-requests-list" id="friend-requests-list">
                        <!-- Friend requests will be added here -->
                        <div class="empty-state" id="no-requests">
                            <i class="fas fa-user-clock"></i>
                            <p>No pending requests</p>
                        </div>
                    </div>
                </div>
                
                <!-- Friends Tab Content -->
                <div class="inbox-tab-content" id="inbox-friends">
                    <div class="friends-list" id="friends-list">
                        <!-- Friends will be added here -->
                        <div class="empty-state" id="no-friends">
                            <i class="fas fa-user-friends"></i>
                            <p>No friends yet</p>
                            <button class="btn-text" onclick="switchView('search')">Find Friends</button>
                        </div>
                    </div>
                </div>
                
                <!-- Report Bug -->
                <div class="inbox-footer">
                    <button class="inbox-footer-btn" onclick="showBugReportModal()">
                        <i class="fas fa-bug"></i>
                        <span>Report a Bug</span>
                    </button>
                </div>
            </div>

            <!-- Search Sidebar -->
            <div id="search-sidebar" class="sidebar-content">
                <div class="sidebar-header">
                    <h2>Search Users</h2>
                </div>
                <div class="sidebar-search">
                    <i class="fas fa-search"></i>
                    <input type="text" id="user-search" placeholder="Search by username...">
                </div>
                <div class="search-results" id="search-results">
                    <!-- Search results will be dynamically added -->
                </div>
            </div>

            <!-- Profile Sidebar - Navigation -->
            <div id="profile-sidebar" class="sidebar-content">
                <div class="sidebar-header">
                    <h2>Profile</h2>
                </div>
                
                <!-- Profile User Preview -->
                <div class="profile-sidebar-user">
                    <img id="sidebar-profile-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="My Avatar" class="profile-sidebar-avatar">
                    <button class="profile-sidebar-edit-btn" onclick="document.getElementById('avatar-picker-modal').classList.remove('hidden')">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                <div class="profile-sidebar-info">
                    <span class="profile-sidebar-name" id="sidebar-profile-name">Display Name</span>
                    <span class="profile-sidebar-wave" id="sidebar-profile-wave">~username</span>
                </div>
                
                <!-- Profile Navigation -->
                <div class="profile-sidebar-nav">
                    <button class="profile-sidebar-item active" data-profile-tab="edit" onclick="toggleProfileEditSection(true)">
                        <i class="fas fa-edit"></i>
                        <span>Edit Profile</span>
                    </button>
                </div>
            </div>

            <!-- Settings Sidebar - Navigation List -->
            <div id="settings-sidebar" class="sidebar-content">
                <div class="sidebar-header">
                    <h2>Settings</h2>
                </div>
                
                <!-- Settings User Info -->
                <div class="settings-sidebar-user">
                    <img id="sidebar-settings-avatar" src="" alt="" class="settings-sidebar-avatar">
                    <div class="settings-sidebar-user-info">
                        <span class="settings-sidebar-username" id="sidebar-settings-username">Username</span>
                        <span class="settings-sidebar-wave" id="sidebar-settings-wave">~username</span>
                    </div>
                </div>
                
                <!-- Settings Navigation -->
                <div class="settings-sidebar-nav-group">
                    <span class="settings-sidebar-label">USER SETTINGS</span>
                    <button class="settings-sidebar-item active" data-settings-tab="account" onclick="switchMainSettingsTab('account')">
                        <i class="fas fa-user"></i>
                        <span>My Account</span>
                    </button>
                    <button class="settings-sidebar-item" data-settings-tab="profile" onclick="switchMainSettingsTab('profile')">
                        <i class="fas fa-id-card"></i>
                        <span>Profile</span>
                    </button>
                    <button class="settings-sidebar-item" data-settings-tab="privacy" onclick="switchMainSettingsTab('privacy')">
                        <i class="fas fa-shield-alt"></i>
                        <span>Privacy & Safety</span>
                    </button>
                </div>
                
                <div class="settings-sidebar-nav-group">
                    <span class="settings-sidebar-label">APP SETTINGS</span>
                    <button class="settings-sidebar-item" data-settings-tab="appearance" onclick="switchMainSettingsTab('appearance')">
                        <i class="fas fa-palette"></i>
                        <span>Appearance</span>
                    </button>
                    <button class="settings-sidebar-item" data-settings-tab="notifications" onclick="switchMainSettingsTab('notifications')">
                        <i class="fas fa-bell"></i>
                        <span>Notifications</span>
                    </button>
                    <button class="settings-sidebar-item" data-settings-tab="chat" onclick="switchMainSettingsTab('chat')">
                        <i class="fas fa-comment"></i>
                        <span>Chat</span>
                    </button>
                </div>
                
                <div class="settings-sidebar-nav-group">
                    <span class="settings-sidebar-label">ABOUT</span>
                    <button class="settings-sidebar-item" data-settings-tab="about" onclick="switchMainSettingsTab('about')">
                        <i class="fas fa-info-circle"></i>
                        <span>About Bump</span>
                    </button>
                </div>
                
                <div class="settings-sidebar-divider"></div>
                
                <button class="settings-sidebar-item danger" onclick="handleLogout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Log Out</span>
                </button>
                <button class="settings-sidebar-item danger" onclick="document.getElementById('delete-account-modal').classList.remove('hidden')">
                    <i class="fas fa-trash"></i>
                    <span>Delete Account</span>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content-area">
            <!-- ========== CHATS VIEW ========== -->
            <div class="main-view active" id="main-chats-view">
                <!-- Empty State -->
                <div id="empty-state" class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h2>Welcome to Bump!</h2>
                    <p>Select a chat or search for users to start messaging</p>
                </div>

                <!-- Chat View -->
                <div id="chat-view" class="chat-view hidden">
                <div class="chat-header">
                    <button class="btn-icon mobile-back-btn" id="mobile-back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="chat-user-info">
                        <img id="chat-avatar" src="" alt="User Avatar" class="chat-avatar">
                        <div class="chat-user-details">
                            <h3 id="chat-username"></h3>
                            <span id="chat-wave-id" class="user-wave-id"></span>
                            <span id="chat-status" class="user-status"></span>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="btn-icon" id="view-profile-btn" title="View Profile">
                            <i class="fas fa-user"></i>
                        </button>
                        <button class="btn-icon" id="more-options-btn" title="More Options">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be dynamically added -->
                </div>
                <div class="chat-input-container">
                    <button class="btn-icon input-side-btn" id="attach-btn" title="Attach File">
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="input-wrapper-main">
                        <input type="text" id="message-input" placeholder="Type a message..." autocomplete="off">
                        <button class="btn-icon input-emoji-btn" id="camera-btn" title="Camera">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <button class="btn-icon input-action-btn" id="voice-btn" title="Voice Note">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="btn-icon input-action-btn btn-send hidden" id="send-btn" title="Send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                
                <!-- File Staging Area (Hidden by default) -->
                <div class="file-staging-area hidden" id="file-staging-area">
                    <div class="staging-header">
                        <span class="staging-count">0 files selected</span>
                        <button class="staging-clear-btn" id="clear-staging-btn">
                            <i class="fas fa-times"></i> Clear All
                        </button>
                    </div>
                    <div class="staging-previews" id="staging-previews">
                        <!-- File previews will be added here dynamically -->
                    </div>
                    <div class="staging-actions">
                        <button class="btn-icon" id="add-more-files-btn" title="Add More Files">
                            <i class="fas fa-plus"></i>
                        </button>
                        <button class="btn-primary staging-send-btn" id="send-staged-files-btn">
                            <i class="fas fa-paper-plane"></i> Send Files
                        </button>
                    </div>
                </div>
                
                <!-- Hidden file inputs -->
                <input type="file" id="file-input" accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.zip" multiple hidden>
                <input type="file" id="camera-input" accept="image/*" capture="environment" hidden>
            </div>
            </div><!-- End main-chats-view -->

            <!-- ========== INBOX VIEW ========== -->
            <div class="main-view" id="main-inbox-view">
                <div class="inbox-main-content">
                    <div class="inbox-main-header">
                        <h1>Inbox</h1>
                        <p class="inbox-main-subtitle">Messages, notifications, and friend requests</p>
                    </div>
                    
                    <!-- Inbox Tabs -->
                    <div class="inbox-main-tabs">
                        <button class="inbox-main-tab active" data-inbox-tab="all">
                            <i class="fas fa-inbox"></i>
                            <span>All Messages</span>
                        </button>
                        <button class="inbox-main-tab" data-inbox-tab="requests">
                            <i class="fas fa-user-plus"></i>
                            <span>Friend Requests</span>
                            <span class="inbox-tab-badge" id="main-requests-badge">0</span>
                        </button>
                        <button class="inbox-main-tab" data-inbox-tab="friends">
                            <i class="fas fa-users"></i>
                            <span>Friends</span>
                        </button>
                    </div>
                    
                    <!-- Inbox Tab Contents -->
                    <div class="inbox-main-tab-content active" id="main-inbox-all">
                        <div class="inbox-messages-grid">
                            <!-- Welcome Message -->
                            <div class="inbox-message-card bump-official unread" onclick="openInboxViewer('welcome')">
                                <div class="inbox-card-avatar">
                                    <div class="bump-avatar-large">B</div>
                                    <i class="fas fa-check-circle verified-icon"></i>
                                </div>
                                <div class="inbox-card-content">
                                    <div class="inbox-card-header">
                                        <span class="inbox-card-sender">Bump Team</span>
                                        <span class="inbox-card-time">Now</span>
                                    </div>
                                    <h3 class="inbox-card-subject">Welcome to Bump! üéâ</h3>
                                    <p class="inbox-card-preview">Your journey starts now. Here's everything you need to know...</p>
                                </div>
                            </div>
                            
                            <!-- Update Message -->
                            <div class="inbox-message-card bump-official" onclick="openInboxViewer('update')">
                                <div class="inbox-card-avatar">
                                    <div class="bump-avatar-large">B</div>
                                    <i class="fas fa-check-circle verified-icon"></i>
                                </div>
                                <div class="inbox-card-content">
                                    <div class="inbox-card-header">
                                        <span class="inbox-card-sender">Bump Updates</span>
                                        <span class="inbox-card-time">Dec 22</span>
                                    </div>
                                    <h3 class="inbox-card-subject">New Features Just Dropped! ‚ú®</h3>
                                    <p class="inbox-card-preview">Check out what's new in Bump v1.0...</p>
                                </div>
                            </div>
                            
                            <!-- Tips Message -->
                            <div class="inbox-message-card bump-official" onclick="openInboxViewer('tips')">
                                <div class="inbox-card-avatar">
                                    <div class="bump-avatar-large tips">
                                        <i class="fas fa-lightbulb"></i>
                                    </div>
                                </div>
                                <div class="inbox-card-content">
                                    <div class="inbox-card-header">
                                        <span class="inbox-card-sender">Bump Tips</span>
                                        <span class="inbox-card-time">Yesterday</span>
                                    </div>
                                    <h3 class="inbox-card-subject">Unlock the full Bump experience üîì</h3>
                                    <p class="inbox-card-preview">Quick tips to get the most out of Bump...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="inbox-main-tab-content" id="main-inbox-requests">
                        <div class="friend-requests-grid" id="main-friend-requests-list">
                            <div class="empty-state-inline">
                                <i class="fas fa-user-clock"></i>
                                <p>No pending friend requests</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="inbox-main-tab-content" id="main-inbox-friends">
                        <div class="friends-grid" id="main-friends-list">
                            <div class="empty-state-inline">
                                <i class="fas fa-user-friends"></i>
                                <p>No friends yet</p>
                                <button class="btn-primary-small" onclick="switchView('search')">Find Friends</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== PROFILE VIEW ========== -->
            <div class="main-view" id="main-profile-view">
                <div class="profile-main-content">
                    <!-- Profile Banner -->
                    <div class="profile-banner-section">
                        <div class="profile-banner-bg"></div>
                        <div class="profile-avatar-wrapper">
                            <img id="main-profile-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="My Avatar">
                            <button class="avatar-edit-btn" id="main-change-avatar-btn">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Profile Info Card -->
                    <div class="profile-info-card">
                        <div class="profile-name-section">
                            <h1 id="main-profile-fullname">Display Name</h1>
                            <span class="profile-wave-tag">~<span id="main-profile-wave-id">username</span></span>
                        </div>
                        
                        <!-- Profile Bio -->
                        <p class="profile-bio-text" id="main-profile-bio-display">No bio yet</p>
                        
                        <!-- Profile Stats - Simple -->
                        <div class="profile-stats-simple">
                            <div class="profile-stat-item">
                                <span class="stat-number" id="profile-friends-count">0</span>
                                <span class="stat-text">Friends</span>
                            </div>
                            <div class="profile-stat-divider"></div>
                            <div class="profile-stat-item">
                                <span class="stat-number" id="profile-member-since">-</span>
                                <span class="stat-text">Joined</span>
                            </div>
                        </div>
                        
                        <!-- Edit Profile Button -->
                        <button class="btn-edit-profile-main" id="toggle-edit-profile-btn">
                            <i class="fas fa-edit"></i> Edit Profile
                        </button>
                        
                        <!-- Edit Profile Form (Hidden by default) -->
                        <div class="profile-edit-section hidden" id="profile-edit-section">
                            <div class="profile-form">
                                <div class="form-field">
                                    <label>Display Name</label>
                                    <input type="text" id="main-edit-fullname" class="form-input-styled">
                                </div>
                                <div class="form-field">
                                    <label>Username</label>
                                    <input type="text" id="main-edit-username" class="form-input-styled" disabled>
                                </div>
                                <div class="form-field">
                                    <label>Email</label>
                                    <input type="email" id="main-edit-email" class="form-input-styled">
                                </div>
                                <div class="form-field">
                                    <label>Bio</label>
                                    <textarea id="main-edit-bio" class="form-textarea-styled" placeholder="Tell us about yourself..."></textarea>
                                </div>
                                <div class="form-field">
                                    <label>Status</label>
                                    <select id="main-edit-status" class="form-select-styled">
                                        <option value="online">üü¢ Online</option>
                                        <option value="away">üü° Away</option>
                                        <option value="busy">üî¥ Busy</option>
                                        <option value="offline">‚ö´ Invisible</option>
                                    </select>
                                </div>
                                <div class="profile-edit-buttons">
                                    <button class="btn-cancel-edit" id="cancel-edit-profile-btn">Cancel</button>
                                    <button class="btn-save-profile" id="main-save-profile-btn">
                                        <i class="fas fa-save"></i> Save Changes
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== SETTINGS VIEW ========== -->
            <div class="main-view" id="main-settings-view">
                <!-- Mobile Settings Tabs -->
                <div class="settings-mobile-tabs">
                    <button class="settings-mobile-tab active" onclick="switchMainSettingsTab('account')">
                        <i class="fas fa-user"></i>
                        <span>Account</span>
                    </button>
                    <button class="settings-mobile-tab" onclick="switchMainSettingsTab('profile')">
                        <i class="fas fa-id-card"></i>
                        <span>Profile</span>
                    </button>
                    <button class="settings-mobile-tab" onclick="switchMainSettingsTab('privacy')">
                        <i class="fas fa-shield-alt"></i>
                        <span>Privacy</span>
                    </button>
                    <button class="settings-mobile-tab" onclick="switchMainSettingsTab('appearance')">
                        <i class="fas fa-palette"></i>
                        <span>Theme</span>
                    </button>
                    <button class="settings-mobile-tab" onclick="switchMainSettingsTab('notifications')">
                        <i class="fas fa-bell"></i>
                        <span>Sounds</span>
                    </button>
                    <button class="settings-mobile-tab danger" onclick="handleLogout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </button>
                </div>
                
                <div class="settings-content-only">
                    <!-- Account Tab -->
                    <div class="settings-main-tab active" id="settings-main-account">
                        <h2>My Account</h2>
                        <div class="settings-card-main">
                            <div class="account-banner-card"></div>
                            <div class="account-card-info">
                                <img id="settings-account-avatar" src="" alt="" class="account-card-avatar">
                                <div class="account-card-details">
                                    <h3 id="settings-account-name">Username</h3>
                                    <span class="account-card-wave" id="settings-account-wave">~username</span>
                                </div>
                                <button class="btn-edit-avatar" onclick="document.getElementById('avatar-picker-modal').classList.remove('hidden')">
                                    Edit Avatar
                                </button>
                            </div>
                        </div>
                        
                        <div class="settings-card-main">
                            <div class="settings-field-row">
                                <label>USERNAME</label>
                                <span id="settings-account-username-display">username</span>
                            </div>
                            <div class="settings-field-row">
                                <label>EMAIL</label>
                                <span id="settings-account-email-display">email@example.com</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profile Tab -->
                    <div class="settings-main-tab" id="settings-main-profile">
                        <h2>Profile</h2>
                        <div class="settings-card-main">
                            <div class="settings-form-field">
                                <label>DISPLAY NAME</label>
                                <input type="text" id="settings-main-display-name" class="settings-form-input" placeholder="How others see you">
                            </div>
                            <div class="settings-form-field">
                                <label>ABOUT ME</label>
                                <textarea id="settings-main-about" class="settings-form-textarea" placeholder="Tell us about yourself..." maxlength="200"></textarea>
                                <span class="settings-char-count"><span id="settings-about-char-count">0</span>/200</span>
                            </div>
                            <button class="btn-save-settings" onclick="saveSettingsMainProfile()">Save Changes</button>
                        </div>
                    </div>
                    
                    <!-- Privacy Tab -->
                    <div class="settings-main-tab" id="settings-main-privacy">
                        <h2>Privacy & Safety</h2>
                        <div class="settings-card-main">
                            <div class="settings-toggle-row">
                                <div class="settings-toggle-label">
                                    <span>Show Online Status</span>
                                    <p>Let others see when you're online</p>
                                </div>
                                <label class="toggle-switch-main">
                                    <input type="checkbox" id="settings-main-online-status" checked>
                                    <span class="toggle-slider-main"></span>
                                </label>
                            </div>
                            <div class="settings-toggle-row">
                                <div class="settings-toggle-label">
                                    <span>Read Receipts</span>
                                    <p>Show when you've read messages</p>
                                </div>
                                <label class="toggle-switch-main">
                                    <input type="checkbox" id="settings-main-read-receipts" checked>
                                    <span class="toggle-slider-main"></span>
                                </label>
                            </div>
                            <div class="settings-toggle-row">
                                <div class="settings-toggle-label">
                                    <span>Allow Friend Requests</span>
                                    <p>Let others send you friend requests</p>
                                </div>
                                <label class="toggle-switch-main">
                                    <input type="checkbox" id="settings-main-friend-requests" checked>
                                    <span class="toggle-slider-main"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Appearance Tab -->
                    <div class="settings-main-tab" id="settings-main-appearance">
                        <h2>Appearance</h2>
                        
                        <!-- Chat Preview -->
                        <div class="appearance-preview-card">
                            <div class="preview-msg received">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=demo" alt="" class="preview-msg-avatar">
                                <div class="preview-msg-content">
                                    <span class="preview-msg-name">BumpUser <span class="preview-msg-tag">~BM</span> <span class="preview-msg-time">Today at 4:21 PM</span></span>
                                    <p>Look at this cool new theme! üé®</p>
                                </div>
                            </div>
                            <div class="preview-msg sent">
                                <img src="https://api.dicebear.com/7.x/adventurer/svg?seed=you" alt="" class="preview-msg-avatar">
                                <div class="preview-msg-content">
                                    <span class="preview-msg-name">You <span class="preview-msg-tag">~BM</span> <span class="preview-msg-time">Today at 4:22 PM</span></span>
                                    <p>Awesome! I love how it looks! ‚ú®</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-card-main">
                            <h3>Theme</h3>
                            <p class="settings-card-desc">Choose your preferred color scheme</p>
                            <div class="theme-options-grid">
                                <button class="theme-option-btn" data-theme="light">
                                    <div class="theme-swatch-preview light"></div>
                                    <span>Light</span>
                                </button>
                                <button class="theme-option-btn active" data-theme="dark">
                                    <div class="theme-swatch-preview dark"></div>
                                    <span>Dark</span>
                                </button>
                                <button class="theme-option-btn" data-theme="midnight">
                                    <div class="theme-swatch-preview midnight"></div>
                                    <span>Midnight</span>
                                </button>
                                <button class="theme-option-btn" data-theme="amoled">
                                    <div class="theme-swatch-preview amoled"></div>
                                    <span>AMOLED</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="settings-card-main">
                            <h3>Accent Color</h3>
                            <p class="settings-card-desc">Personalize your Bump experience</p>
                            <div class="accent-colors-grid">
                                <button class="accent-color-btn active" data-accent="#6366F1" style="background: #6366F1;"></button>
                                <button class="accent-color-btn" data-accent="#8B5CF6" style="background: #8B5CF6;"></button>
                                <button class="accent-color-btn" data-accent="#EC4899" style="background: #EC4899;"></button>
                                <button class="accent-color-btn" data-accent="#EF4444" style="background: #EF4444;"></button>
                                <button class="accent-color-btn" data-accent="#F59E0B" style="background: #F59E0B;"></button>
                                <button class="accent-color-btn" data-accent="#10B981" style="background: #10B981;"></button>
                                <button class="accent-color-btn" data-accent="#06B6D4" style="background: #06B6D4;"></button>
                                <button class="accent-color-btn" data-accent="#3B82F6" style="background: #3B82F6;"></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications Tab -->
                    <div class="settings-main-tab" id="settings-main-notifications">
                        <h2>Notifications</h2>
                        <div class="settings-card-main">
                            <div class="settings-toggle-row">
                                <div class="settings-toggle-label">
                                    <span>Push Notifications</span>
                                    <p>Get notified when you receive messages</p>
                                </div>
                                <label class="toggle-switch-main">
                                    <input type="checkbox" id="settings-main-push" checked>
                                    <span class="toggle-slider-main"></span>
                                </label>
                            </div>
                            <div class="settings-toggle-row">
                                <div class="settings-toggle-label">
                                    <span>Message Sounds</span>
                                    <p>Play a sound for new messages</p>
                                </div>
                                <label class="toggle-switch-main">
                                    <input type="checkbox" id="settings-main-sound" checked>
                                    <span class="toggle-slider-main"></span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-card-main">
                            <h3>Notification Sound</h3>
                            <p class="settings-card-desc">Choose your notification sound</p>
                            <div class="notification-sounds-grid">
                                <button class="sound-option-btn active" data-sound="pop">
                                    <i class="fas fa-volume-up"></i>
                                    <span>Pop</span>
                                </button>
                                <button class="sound-option-btn" data-sound="ding">
                                    <i class="fas fa-bell"></i>
                                    <span>Ding</span>
                                </button>
                                <button class="sound-option-btn" data-sound="chime">
                                    <i class="fas fa-music"></i>
                                    <span>Chime</span>
                                </button>
                                <button class="sound-option-btn" data-sound="bubble">
                                    <i class="fas fa-comment-dots"></i>
                                    <span>Bubble</span>
                                </button>
                            </div>
                            <button class="test-sound-btn" id="test-notification-sound">
                                <i class="fas fa-play"></i> Test Sound
                            </button>
                        </div>
                    </div>
                    
                    <!-- Chat Tab -->
                    <div class="settings-main-tab" id="settings-main-chat">
                        <h2>Chat</h2>
                        <div class="settings-card-main">
                            <div class="settings-form-field">
                                <label>BUBBLE STYLE</label>
                                <select id="settings-main-bubble-style" class="settings-form-select">
                                    <option value="classic">üí¨ Classic</option>
                                    <option value="bump">‚ú® Bump Style</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- About Tab -->
                    <div class="settings-main-tab" id="settings-main-about">
                        <h2>About Bump</h2>
                        <div class="settings-card-main about-card-main">
                            <div class="about-logo-section">
                                <span class="about-logo-text-main">Bump</span>
                                <span class="about-version-tag">v1.0.0</span>
                            </div>
                            <p class="about-tagline-main">Connect instantly. Chat seamlessly.</p>
                            <div class="about-links-row">
                                <a href="https://github.com/Kirtannjoshi/bump" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                                <a href="https://bump-ixlu.onrender.com" target="_blank"><i class="fas fa-globe"></i> Website</a>
                                <a href="#" onclick="showBugReportModal(); return false;"><i class="fas fa-bug"></i> Report Bug</a>
                            </div>
                            <p class="about-copyright-main">¬© 2025 Bump Chat. Made with üíú</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ========== SEARCH VIEW ========== -->
            <div class="main-view" id="main-search-view">
                <div class="search-main-content">
                    <div class="search-main-header">
                        <h1>Find Friends</h1>
                        <p class="search-main-subtitle">Search for users to connect with</p>
                    </div>
                    <div class="search-main-input-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" id="main-user-search" placeholder="Search by username..." class="search-main-input">
                    </div>
                    <div class="search-results-grid" id="main-search-results">
                        <!-- Search results will be dynamically added -->
                        <div class="empty-state-inline">
                            <i class="fas fa-user-friends"></i>
                            <p>Start typing to search for users</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Profile Panel (Right Sidebar) - Discord Style -->
        <aside class="profile-panel hidden" id="profile-panel">
            <!-- Banner -->
            <div class="panel-banner" id="panel-banner"></div>
            
            <!-- Close Button -->
            <button class="panel-close-btn" id="close-panel-btn">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Avatar -->
            <div class="panel-avatar-wrapper">
                <img id="panel-avatar-img" src="" alt="User Avatar" class="panel-avatar">
                <span class="panel-status-dot" id="panel-status-dot"></span>
            </div>
            
            <!-- User Info Card -->
            <div class="panel-card">
                <div class="panel-identity">
                    <h2 id="panel-fullname">Display Name</h2>
                    <span class="panel-wave-tag">~<span id="panel-username">username</span></span>
                </div>
                
                <!-- Quick Actions -->
                <div class="panel-quick-actions">
                    <button class="panel-action-btn primary" id="panel-message-btn" title="Message">
                        <i class="fas fa-comment"></i>
                    </button>
                    <button class="panel-action-btn success" id="panel-add-friend-btn" title="Add Friend">
                        <i class="fas fa-user-plus"></i>
                    </button>
                    <button class="panel-action-btn" id="panel-more-btn" title="More">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                </div>
                
                <!-- Tabs -->
                <div class="panel-tabs">
                    <button class="panel-tab active" data-panel-tab="info">Info</button>
                    <button class="panel-tab" data-panel-tab="mutual">Mutual</button>
                </div>
                
                <!-- Info Tab -->
                <div class="panel-tab-content active" id="panel-tab-info">
                    <div class="panel-section">
                        <h4>About Me</h4>
                        <p id="panel-bio" class="panel-bio-text">No bio yet</p>
                    </div>
                    <div class="panel-section">
                        <h4>Status</h4>
                        <div class="panel-status-info">
                            <span class="status-indicator" id="panel-status-indicator"></span>
                            <span id="panel-status">Online</span>
                        </div>
                    </div>
                    <div class="panel-section">
                        <h4>Member Since</h4>
                        <p id="panel-joined" class="panel-date"><i class="fas fa-calendar"></i> Jan 1, 2025</p>
                    </div>
                </div>
                
                <!-- Mutual Tab -->
                <div class="panel-tab-content" id="panel-tab-mutual">
                    <div class="panel-section">
                        <h4>Mutual Friends</h4>
                        <div class="panel-mutual-list" id="panel-mutual-friends">
                            <p class="panel-empty">No mutual friends</p>
                        </div>
                    </div>
                </div>
                
                <!-- Footer Actions -->
                <div class="panel-footer-actions">
                    <button class="panel-footer-btn" id="panel-mute-btn">
                        <i class="fas fa-bell-slash"></i>
                        <span>Mute</span>
                    </button>
                    <button class="panel-footer-btn danger" id="panel-block-btn">
                        <i class="fas fa-ban"></i>
                        <span>Block</span>
                    </button>
                </div>
                
                <!-- View Full Profile Button -->
                <button class="panel-full-profile-btn" id="panel-view-full-btn">
                    <i class="fas fa-expand"></i> View Full Profile
                </button>
            </div>
        </aside>
    </div>

    <!-- New Chat Modal -->
    <div class="modal hidden" id="new-chat-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Start New Chat</h3>
                <button class="btn-icon modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="sidebar-search">
                    <i class="fas fa-search"></i>
                    <input type="text" id="new-chat-search" placeholder="Search users...">
                </div>
                <div class="user-list" id="new-chat-user-list">
                    <!-- Users will be dynamically added -->
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal hidden" id="about-modal">
        <div class="modal-content about-modal-content">
            <div class="modal-header">
                <h3>About</h3>
                <button class="btn-icon modal-close" id="close-about-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body about-body">
                <div class="about-logo-text">Bump</div>
                <p class="about-tagline">Connect instantly. Chat seamlessly.</p>
                <p class="about-version">Version 1.0.0</p>
                
                <div class="about-features">
                    <div class="about-feature">
                        <i class="fas fa-bolt"></i>
                        <span>Real-time messaging</span>
                    </div>
                    <div class="about-feature">
                        <i class="fas fa-user-friends"></i>
                        <span>Friend system</span>
                    </div>
                    <div class="about-feature">
                        <i class="fas fa-image"></i>
                        <span>Media sharing</span>
                    </div>
                    <div class="about-feature">
                        <i class="fas fa-bell"></i>
                        <span>Push notifications</span>
                    </div>
                    <div class="about-feature">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Mobile friendly</span>
                    </div>
                    <div class="about-feature">
                        <i class="fas fa-lock"></i>
                        <span>Secure & private</span>
                    </div>
                </div>
                
                <p class="about-copyright">¬© 2025 Bump Chat. All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- Inbox Message Viewer - Discord Thread Style -->
    <div class="inbox-viewer hidden" id="inbox-viewer">
        <div class="inbox-viewer-panel">
            <!-- Header -->
            <div class="inbox-viewer-header">
                <button class="btn-icon" onclick="closeInboxViewer()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="inbox-viewer-title">
                    <span id="inbox-viewer-sender">Bump Team</span>
                    <span class="inbox-viewer-badge" id="inbox-viewer-badge"><i class="fas fa-check-circle"></i> Verified</span>
                </div>
                <button class="btn-icon" onclick="closeInboxViewer()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Thread Content -->
            <div class="inbox-viewer-content" id="inbox-viewer-content">
                <!-- Messages will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Bug Report Modal -->
    <div class="modal hidden" id="bug-report-modal">
        <div class="modal-content bug-modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-bug"></i> Report a Bug</h3>
                <button class="btn-icon modal-close" onclick="hideBugReportModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="bug-report-form" class="bug-form">
                    <div class="form-group">
                        <label class="form-label">DESCRIBE THE BUG <span class="required">*</span></label>
                        <textarea id="bug-description" class="form-textarea" rows="4" placeholder="What went wrong?" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">STEPS TO REPRODUCE</label>
                        <textarea id="bug-steps" class="form-textarea" rows="3" placeholder="How can we reproduce this bug?"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">BUG SEVERITY</label>
                        <select id="bug-severity" class="form-select">
                            <option value="low">Low - Minor issue</option>
                            <option value="medium">Medium - Affects usability</option>
                            <option value="high">High - Major problem</option>
                            <option value="critical">Critical - App broken</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-discord">
                        <i class="fas fa-paper-plane"></i>
                        Submit Report
                    </button>
                </form>
                <p class="bug-note">Your report will be sent to the Bump team. Thank you for helping us improve! üíú</p>
            </div>
        </div>
    </div>

    <!-- Avatar Picker Modal - Unified Categorized -->
    <div class="modal hidden" id="avatar-picker-modal">
        <div class="modal-content avatar-modal-content">
            <div class="modal-header">
                <h3>Choose Your Avatar</h3>
                <button class="btn-icon modal-close" id="close-avatar-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body avatar-picker-body">
                <div class="avatar-preview-section">
                    <img id="avatar-preview" src="" alt="Avatar Preview" class="avatar-preview-img">
                    <button class="btn-secondary" id="randomize-avatar-btn">
                        <i class="fas fa-shuffle"></i> Randomize
                    </button>
                </div>
                
                <!-- Categorized Avatar Rows -->
                <div class="avatar-categories" id="avatar-categories">
                    <!-- Artistic Category -->
                    <div class="avatar-category">
                        <h4 class="category-label">‚ú® Artistic</h4>
                        <div class="category-row">
                            <button type="button" class="avatar-picker-btn" data-style="avataaars" data-category="artistic">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=pick1" alt="Avataaars">
                                <span>Avataaars</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="adventurer" data-category="artistic">
                                <img src="https://api.dicebear.com/7.x/adventurer/svg?seed=pick1" alt="Adventurer">
                                <span>Adventurer</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="notionists" data-category="artistic">
                                <img src="https://api.dicebear.com/7.x/notionists/svg?seed=pick1" alt="Notionists">
                                <span>Notionists</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="open-peeps" data-category="artistic">
                                <img src="https://api.dicebear.com/7.x/open-peeps/svg?seed=pick1" alt="Open Peeps">
                                <span>Open Peeps</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Fun Faces Category -->
                    <div class="avatar-category">
                        <h4 class="category-label">üòä Fun Faces</h4>
                        <div class="category-row">
                            <button type="button" class="avatar-picker-btn" data-style="big-smile" data-category="fun">
                                <img src="https://api.dicebear.com/7.x/big-smile/svg?seed=pick1" alt="Big Smile">
                                <span>Big Smile</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="lorelei" data-category="fun">
                                <img src="https://api.dicebear.com/7.x/lorelei/svg?seed=pick1" alt="Lorelei">
                                <span>Lorelei</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="fun-emoji" data-category="fun">
                                <img src="https://api.dicebear.com/7.x/fun-emoji/svg?seed=pick1" alt="Fun Emoji">
                                <span>Fun Emoji</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="thumbs" data-category="fun">
                                <img src="https://api.dicebear.com/7.x/thumbs/svg?seed=pick1" alt="Thumbs">
                                <span>Thumbs</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Abstract & Robots Category -->
                    <div class="avatar-category">
                        <h4 class="category-label">ü§ñ Abstract & Robots</h4>
                        <div class="category-row">
                            <button type="button" class="avatar-picker-btn" data-style="bottts" data-category="abstract">
                                <img src="https://api.dicebear.com/7.x/bottts/svg?seed=pick1" alt="Robots">
                                <span>Robots</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="shapes" data-category="abstract">
                                <img src="https://api.dicebear.com/7.x/shapes/svg?seed=pick1" alt="Shapes">
                                <span>Shapes</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="identicon" data-category="abstract">
                                <img src="https://api.dicebear.com/7.x/identicon/svg?seed=pick1" alt="Identicon">
                                <span>Identicon</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="rings" data-category="abstract">
                                <img src="https://api.dicebear.com/7.x/rings/svg?seed=pick1" alt="Rings">
                                <span>Rings</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pixelated Category -->
                    <div class="avatar-category">
                        <h4 class="category-label">üéÆ Pixelated</h4>
                        <div class="category-row">
                            <button type="button" class="avatar-picker-btn" data-style="pixel-art" data-category="pixel">
                                <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=pick1" alt="Pixel Art">
                                <span>Pixel Art</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="pixel-art-neutral" data-category="pixel">
                                <img src="https://api.dicebear.com/7.x/pixel-art-neutral/svg?seed=pick1" alt="Neutral">
                                <span>Neutral</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="micah" data-category="pixel">
                                <img src="https://api.dicebear.com/7.x/micah/svg?seed=pick1" alt="Micah">
                                <span>Micah</span>
                            </button>
                            <button type="button" class="avatar-picker-btn" data-style="personas" data-category="pixel">
                                <img src="https://api.dicebear.com/7.x/personas/svg?seed=pick1" alt="Personas">
                                <span>Personas</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <button class="btn-primary" id="save-avatar-btn">
                    <i class="fas fa-check"></i> Save Avatar
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Sound -->
    <audio id="notification-sound" preload="auto">
        <source src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" type="audio/mpeg">
    </audio>

    <!-- Delete Message Modal -->
    <div class="delete-modal-overlay hidden" id="delete-modal">
        <div class="delete-modal">
            <div class="delete-modal-header">
                <i class="fas fa-trash-alt"></i>
                <h3>Delete Message</h3>
            </div>
            <p class="delete-modal-text">How would you like to delete this message?</p>
            <div class="delete-modal-options">
                <button class="delete-option-btn delete-for-me" id="delete-for-me-btn">
                    <i class="fas fa-user"></i>
                    <span>Delete for Me</span>
                    <small>Only you won't see this message</small>
                </button>
                <button class="delete-option-btn delete-for-everyone" id="delete-for-everyone-btn">
                    <i class="fas fa-users"></i>
                    <span>Delete for Everyone</span>
                    <small>Message will be removed for all</small>
                </button>
            </div>
            <button class="delete-modal-cancel" id="delete-cancel-btn">Cancel</button>
        </div>
    </div>

    <!-- User Profile Modal -->
    <!-- Discord-style User Profile Modal -->
    <div class="modal hidden" id="user-profile-modal">
        <div class="discord-profile-modal">
            <!-- Banner -->
            <div class="discord-profile-banner" id="discord-profile-banner"></div>
            
            <!-- Close Button -->
            <button class="discord-profile-close" id="close-user-profile-modal">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Avatar -->
            <div class="discord-profile-avatar-wrapper">
                <img id="user-profile-avatar-img" src="" alt="User Avatar" class="discord-profile-avatar">
                <span class="discord-status-dot" id="user-profile-status-dot"></span>
            </div>
            
            <!-- Profile Card -->
            <div class="discord-profile-card">
                <!-- Header with name and actions -->
                <div class="discord-profile-header">
                    <div class="discord-profile-identity">
                        <h2 id="user-profile-name">Display Name</h2>
                        <span class="discord-profile-tag"><span class="wave-prefix">~</span><span id="user-profile-username">username</span>:<span id="user-profile-discriminator">01</span></span>
                    </div>
                    <div class="discord-profile-quick-actions">
                        <button class="discord-action-btn primary" id="send-message-btn" title="Send Message">
                            <i class="fas fa-comment"></i>
                        </button>
                        <button class="discord-action-btn success" id="add-friend-btn" title="Add Friend">
                            <i class="fas fa-user-plus"></i>
                        </button>
                        <button class="discord-action-btn secondary" id="more-actions-btn" title="More">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Tabs -->
                <div class="discord-profile-tabs">
                    <button class="discord-tab active" data-tab="user-info">User Info</button>
                    <button class="discord-tab" data-tab="mutual-friends">Mutual Friends</button>
                    <button class="discord-tab" data-tab="activity">Activity</button>
                </div>
                
                <!-- Tab Contents -->
                <div class="discord-profile-tab-content active" id="tab-user-info">
                    <!-- About Me -->
                    <div class="discord-section">
                        <h4>About Me</h4>
                        <p id="user-profile-bio" class="discord-about-me">No bio yet</p>
                    </div>
                    
                    <!-- Member Since -->
                    <div class="discord-section">
                        <h4>Bump Member Since</h4>
                        <p class="discord-member-since" id="user-profile-joined">
                            <i class="fas fa-calendar"></i>
                            <span>Jan 1, 2025</span>
                        </p>
                    </div>
                    
                    <!-- Status -->
                    <div class="discord-section">
                        <h4>Status</h4>
                        <div class="discord-status" id="user-profile-current-status">
                            <span class="status-indicator online"></span>
                            <span id="user-profile-status-text">Online</span>
                        </div>
                    </div>
                </div>
                
                <div class="discord-profile-tab-content" id="tab-mutual-friends">
                    <div class="discord-section">
                        <h4>Mutual Friends</h4>
                        <div class="discord-mutual-list" id="mutual-friends-list">
                            <p class="discord-empty-state">No mutual friends</p>
                        </div>
                    </div>
                </div>
                
                <div class="discord-profile-tab-content" id="tab-activity">
                    <div class="discord-section">
                        <h4>Currently</h4>
                        <div class="discord-activity" id="user-activity">
                            <p class="discord-empty-state">Not doing anything right now</p>
                        </div>
                    </div>
                </div>
                
                <!-- Actions Bar -->
                <div class="discord-profile-actions-bar">
                    <button class="discord-full-action mute" id="mute-user-btn">
                        <i class="fas fa-bell-slash"></i>
                        <span>Mute Notifications</span>
                    </button>
                    <button class="discord-full-action block" id="block-user-btn">
                        <i class="fas fa-ban"></i>
                        <span>Block</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Confirmation Modal -->
    <div class="modal hidden" id="delete-account-modal">
        <div class="modal-content delete-account-modal-content">
            <div class="modal-header danger-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Delete Account</h3>
                <button class="btn-icon modal-close" id="close-delete-account-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body delete-account-body">
                <div class="warning-icon">
                    <i class="fas fa-user-slash"></i>
                </div>
                <h4>Are you absolutely sure?</h4>
                <p>This action cannot be undone. This will permanently delete your account and remove all your data from our servers.</p>
                <ul class="delete-consequences">
                    <li><i class="fas fa-times-circle"></i> All your messages will be deleted</li>
                    <li><i class="fas fa-times-circle"></i> Your friend connections will be removed</li>
                    <li><i class="fas fa-times-circle"></i> Your profile will be permanently erased</li>
                </ul>
                <div class="confirm-delete-section">
                    <label>Type your username to confirm:</label>
                    <input type="text" id="confirm-delete-username" class="confirm-input" placeholder="Enter your username">
                </div>
                <div class="delete-account-actions">
                    <button class="btn-secondary" id="cancel-delete-account">Cancel</button>
                    <button class="btn-danger-confirm" id="confirm-delete-account" disabled>
                        <i class="fas fa-trash-alt"></i> Delete My Account
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Discord-Style Full Page Settings (Standalone Overlay) -->
    <div class="discord-settings-page hidden" id="discord-settings-page">
        <!-- Left Navigation -->
        <div class="settings-nav">
            <div class="settings-nav-header">
                <img id="settings-user-avatar" src="" alt="" class="settings-user-avatar">
                <div class="settings-user-info">
                    <span class="settings-user-name" id="settings-user-name">Username</span>
                    <span class="settings-user-edit" onclick="closeDiscordSettings(); switchView('profile');">Edit Profile ‚úèÔ∏è</span>
                </div>
            </div>
            <div class="settings-nav-search">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search" id="settings-search-input">
            </div>
            
            <div class="settings-nav-section">
                <span class="settings-nav-title">USER SETTINGS</span>
                <button class="settings-nav-item active" data-settings-tab="account">
                    <i class="fas fa-user"></i> My Account
                </button>
                <button class="settings-nav-item" data-settings-tab="profile">
                    <i class="fas fa-id-card"></i> Profile
                </button>
                <button class="settings-nav-item" data-settings-tab="privacy">
                    <i class="fas fa-shield-alt"></i> Privacy & Safety
                </button>
            </div>
            
            <div class="settings-nav-section">
                <span class="settings-nav-title">APP SETTINGS</span>
                <button class="settings-nav-item" data-settings-tab="appearance">
                    <i class="fas fa-palette"></i> Appearance
                </button>
                <button class="settings-nav-item" data-settings-tab="notifications">
                    <i class="fas fa-bell"></i> Notifications
                </button>
                <button class="settings-nav-item" data-settings-tab="chat">
                    <i class="fas fa-comment"></i> Chat
                </button>
            </div>
            
            <div class="settings-nav-section">
                <span class="settings-nav-title">ABOUT</span>
                <button class="settings-nav-item" data-settings-tab="about">
                    <i class="fas fa-info-circle"></i> About Bump
                </button>
            </div>
            
            <div class="settings-nav-divider"></div>
            
            <button class="settings-nav-item danger" id="settings-logout-btn" onclick="handleLogout()">
                <i class="fas fa-sign-out-alt"></i> Log Out
            </button>
            <button class="settings-nav-item danger" id="settings-delete-btn" onclick="document.getElementById('delete-account-modal').classList.remove('hidden')">
                <i class="fas fa-trash"></i> Delete Account
            </button>
        </div>
        
        <!-- Right Content -->
        <div class="settings-content">
            <button class="settings-close-btn" onclick="closeDiscordSettings()">
                <i class="fas fa-times"></i>
                <span>ESC</span>
            </button>
            
            <!-- Account Tab -->
            <div class="settings-tab active" id="settings-tab-account">
                <h2>My Account</h2>
                <div class="settings-card account-card">
                    <div class="account-banner"></div>
                    <div class="account-info">
                        <img id="account-avatar" src="" alt="" class="account-avatar">
                        <div class="account-details">
                            <h3 id="account-name">Username</h3>
                            <span class="account-wave-id" id="account-wave-id">~username</span>
                        </div>
                        <button class="btn-edit" onclick="document.getElementById('avatar-picker-modal').classList.remove('hidden')">
                            Edit Avatar
                        </button>
                    </div>
                </div>
                
                <div class="settings-card">
                    <div class="settings-field">
                        <label>USERNAME</label>
                        <div class="settings-field-value">
                            <span id="account-username-display">username</span>
                        </div>
                    </div>
                    <div class="settings-field">
                        <label>EMAIL</label>
                        <div class="settings-field-value">
                            <span id="account-email-display">email@example.com</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Profile Tab -->
            <div class="settings-tab" id="settings-tab-profile">
                <h2>Profile</h2>
                <div class="settings-card">
                    <div class="settings-field">
                        <label>DISPLAY NAME</label>
                        <input type="text" id="settings-display-name" class="settings-input" placeholder="How others see you">
                    </div>
                    <div class="settings-field">
                        <label>ABOUT ME</label>
                        <textarea id="settings-about" class="settings-textarea" placeholder="Tell us about yourself..." maxlength="200"></textarea>
                        <span class="char-count"><span id="about-char-count">0</span>/200</span>
                    </div>
                    <button class="btn-save" onclick="saveSettingsProfile()">Save Changes</button>
                </div>
            </div>
            
            <!-- Privacy Tab -->
            <div class="settings-tab" id="settings-tab-privacy">
                <h2>Privacy & Safety</h2>
                <div class="settings-card">
                    <div class="settings-toggle-item">
                        <div class="settings-toggle-info">
                            <span>Show Online Status</span>
                            <p>Let others see when you're online</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="privacy-online-status" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-toggle-item">
                        <div class="settings-toggle-info">
                            <span>Read Receipts</span>
                            <p>Show when you've read messages</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="privacy-read-receipts" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-toggle-item">
                        <div class="settings-toggle-info">
                            <span>Allow Friend Requests</span>
                            <p>Let others send you friend requests</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="privacy-friend-requests" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Appearance Tab -->
            <div class="settings-tab" id="settings-tab-appearance">
                <h2>Appearance</h2>
                
                <!-- Chat Preview -->
                <div class="appearance-preview">
                    <div class="preview-message received">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=demo" alt="" class="preview-avatar">
                        <div class="preview-content">
                            <span class="preview-name">BumpUser <span class="preview-tag">~BM</span> <span class="preview-time">Today at 4:21 PM</span></span>
                            <p>Look at this cool new theme! üé®</p>
                        </div>
                    </div>
                    <div class="preview-message sent">
                        <img src="https://api.dicebear.com/7.x/adventurer/svg?seed=you" alt="" class="preview-avatar">
                        <div class="preview-content">
                            <span class="preview-name">You <span class="preview-tag">~BM</span> <span class="preview-time">Today at 4:22 PM</span></span>
                            <p>Awesome! I love how it looks! ‚ú®</p>
                        </div>
                    </div>
                </div>
                
                <div class="settings-card">
                    <h3>Theme</h3>
                    <p class="settings-card-desc">Choose your preferred color scheme</p>
                    <div class="theme-grid">
                        <button class="theme-option" data-theme="light">
                            <div class="theme-swatch light"></div>
                            <span>Light</span>
                        </button>
                        <button class="theme-option active" data-theme="dark">
                            <div class="theme-swatch dark"></div>
                            <span>Dark</span>
                        </button>
                        <button class="theme-option" data-theme="midnight">
                            <div class="theme-swatch midnight"></div>
                            <span>Midnight</span>
                        </button>
                        <button class="theme-option" data-theme="amoled">
                            <div class="theme-swatch amoled"></div>
                            <span>AMOLED</span>
                        </button>
                    </div>
                </div>
                
                <div class="settings-card">
                    <h3>Accent Color</h3>
                    <p class="settings-card-desc">Personalize your Bump experience</p>
                    <div class="accent-colors">
                        <button class="accent-color active" data-accent="#6366F1" style="background: #6366F1;"></button>
                        <button class="accent-color" data-accent="#8B5CF6" style="background: #8B5CF6;"></button>
                        <button class="accent-color" data-accent="#EC4899" style="background: #EC4899;"></button>
                        <button class="accent-color" data-accent="#EF4444" style="background: #EF4444;"></button>
                        <button class="accent-color" data-accent="#F59E0B" style="background: #F59E0B;"></button>
                        <button class="accent-color" data-accent="#10B981" style="background: #10B981;"></button>
                        <button class="accent-color" data-accent="#06B6D4" style="background: #06B6D4;"></button>
                        <button class="accent-color" data-accent="#3B82F6" style="background: #3B82F6;"></button>
                    </div>
                </div>
            </div>
            
            <!-- Notifications Tab -->
            <div class="settings-tab" id="settings-tab-notifications">
                <h2>Notifications</h2>
                <div class="settings-card">
                    <div class="settings-toggle-item">
                        <div class="settings-toggle-info">
                            <span>Push Notifications</span>
                            <p>Get notified when you receive messages</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notif-push" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-toggle-item">
                        <div class="settings-toggle-info">
                            <span>Message Sounds</span>
                            <p>Play a sound for new messages</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notif-sound" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Chat Tab -->
            <div class="settings-tab" id="settings-tab-chat">
                <h2>Chat</h2>
                <div class="settings-card">
                    <div class="settings-field">
                        <label>BUBBLE STYLE</label>
                        <select id="settings-bubble-style" class="settings-select">
                            <option value="classic">üí¨ Classic</option>
                            <option value="bump">‚ú® Bump Style</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- About Tab -->
            <div class="settings-tab" id="settings-tab-about">
                <h2>About Bump</h2>
                <div class="settings-card about-card">
                    <div class="about-logo">
                        <span class="about-logo-text">Bump</span>
                        <span class="about-version">v1.0.0</span>
                    </div>
                    <p class="about-tagline">Connect instantly. Chat seamlessly.</p>
                    <div class="about-links">
                        <a href="https://github.com/Kirtannjoshi/bump" target="_blank"><i class="fab fa-github"></i> GitHub</a>
                        <a href="https://bump-ixlu.onrender.com" target="_blank"><i class="fas fa-globe"></i> Website</a>
                        <a href="#" onclick="showBugReportModal(); return false;"><i class="fas fa-bug"></i> Report Bug</a>
                    </div>
                    <p class="about-copyright">¬© 2025 Bump Chat. Made with üíú</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Socket.io Client -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
